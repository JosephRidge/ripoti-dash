<template>
  <div style="height: 600px; width: 800px">
    <l-map
      :use-global-leaflet="false"
      style="height: 100vh; width: 100vw"
      class="relative"
      ref="map"
      :zoom="zoom"
      :minZoom="7.5"
      :maxZoom="16"
      :center="centerboundsOfKenya"
      :maxBounds="bounds"
      :options="{ zoomControl: true }"
      :bounds="bounds"
      @ready="onLeafletReady"
    >
      <l-tile-layer
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        layer-type="base"
        name="OpenStreetMap"
      ></l-tile-layer>
      <!-- POLYGONS 
    - Nairobi CBD
    - Karen 
    - Rongai 
    - Madaraka
    - Parklands
    - Dandora
    -->
      <!--  Nairobi CBD marker & polygon-->
      <l-marker
        :options="{ className: 'z-50 bg-green ' }"
        :lat-lng="[-1.2866208558120888, 36.82125025129386]"
      >
      <l-icon
          class="transition ease-in-out duration-150 shadow-lg"
          :icon-size="iconSize"
          icon-url="https://firebasestorage.googleapis.com/v0/b/ripoti-97777.appspot.com/o/Group%2029.svg?alt=media&token=540fca35-6e4a-4bcd-b869-e3e03ee19ec5"
        />
        <l-popup>
          Nairobi CBD Region
        </l-popup>
      </l-marker>
      <l-polygon
        :lat-lngs="polygon.cbd"
        color="#0ffffff"
        :fill="true"
        :fillOpacity="0.5"
        fillColor="#FF9F1C"
        class="rounded"
      ></l-polygon>

      <!-- Parklands marker & polygon -1.250013235629595,36.80002978287649 -->
      <l-marker
        :options="{ className: 'z-50 bg-green ' }"
        :lat-lng="[-1.2627334573398628, 36.8110131111749]"
      >
      <l-icon
          class="transition ease-in-out duration-150 shadow-lg"
          :icon-size="iconSize"
          icon-url="https://firebasestorage.googleapis.com/v0/b/ripoti-97777.appspot.com/o/Group%2029.svg?alt=media&token=540fca35-6e4a-4bcd-b869-e3e03ee19ec5"
        />
        <l-popup>
          Parklands Region
        </l-popup>
      </l-marker>
      <l-polygon
        :lat-lngs="parklandsPolygon.latlng"
        color="#0ffffff"
        :fill="true"
        :fillOpacity="0.5"
        fillColor="#4d4dff"
        class="rounded"
      ></l-polygon>

      <!-- Karen marker and polygon -->
      <l-marker
        :options="{ className: 'z-50 bg-green ' }"
        :lat-lng="[-1.3388665419722088, 36.717877557467034]"
      >   <l-icon
          class="transition ease-in-out duration-150 shadow-lg"
          :icon-size="iconSize"
          icon-url="https://firebasestorage.googleapis.com/v0/b/ripoti-97777.appspot.com/o/Group%2029.svg?alt=media&token=540fca35-6e4a-4bcd-b869-e3e03ee19ec5"
        />
        <l-popup>
          Karen Region
        </l-popup>
      </l-marker>
      <l-polygon
        :lat-lngs="karenPolygon.latlng"
        color="#0ffffff"
        :fill="true"
        :fillOpacity="0.5"
        fillColor="#8000ff"
        class="rounded"
      ></l-polygon>
      <!-- Madaraka marker & polygon -->
      <l-marker
        :options="{ className: 'z-50 bg-green ' }"
        :lat-lng="[-1.307040072969258, 36.813869756592226]"
      >  <l-icon
          class="transition ease-in-out duration-150 shadow-lg"
          :icon-size="iconSize"
          icon-url="https://firebasestorage.googleapis.com/v0/b/ripoti-97777.appspot.com/o/Group%2029.svg?alt=media&token=540fca35-6e4a-4bcd-b869-e3e03ee19ec5"
        />
        <l-popup>
          Madaraka Region
        </l-popup>
      </l-marker>
      <l-polygon
        :lat-lngs="madarakaPolygon.latlng"
        color="#0ffffff"
        :fill="true"
        :fillOpacity="0.5"
        fillColor="#80ff00"
        class="rounded"
      ></l-polygon>

      <!-- Dandora marker & polygon -->
      <l-marker
        :options="{ className: 'z-50 bg-green ' }"
        :lat-lng="[-1.3953666201650492, 36.75291056015351]"
      >
      <l-icon
          class="transition ease-in-out duration-150 shadow-lg"
          :icon-size="iconSize"
          icon-url="https://firebasestorage.googleapis.com/v0/b/ripoti-97777.appspot.com/o/Group%2029.svg?alt=media&token=540fca35-6e4a-4bcd-b869-e3e03ee19ec5"
        />
        <l-popup>
          Kajiado Region
        </l-popup>
      </l-marker>
      <l-polygon
        :lat-lngs="dandoraPolygon.latlng"
        color="#0ffffff"
        :fill="true"
        :fillOpacity="0.5"
        fillColor="#00ff00"
        class="rounded"
      ></l-polygon>

      <!--  -->
    </l-map>
  </div>
</template>

<script>
import "leaflet/dist/leaflet.css";
import {
  LMap,
  LTileLayer,
  LMarker,
  LTooltip,
  LPopup,
  LPolygon,
  LIcon,
} from "@vue-leaflet/vue-leaflet";
export default {
  components: {
    LMap,
    LTileLayer,
    LMarker,
    LTooltip,
    LPopup,
    LPolygon,
    LIcon,
  },
  data() {
    return {
      zoom: 2,
      url: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
      attribution:
        '&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',
      markerLatLng: [51.504, -0.159],
      iconWidth: 35,
      iconHeight: 20,
      iconSize: 30,
      //    iconUrl: "./assets/place.svg",
      //   rangerMarker: "./assets/ranger_marker.svg",
      //   rangerShed: "./assets/ranger_shed.svg",
      center: [-1.3092761076679664, 36.81418776512146],
      centerboundsOfKenya: [-1.3092761076679664, 36.81418776512146],
      southWestKenya: [-4.8995204, 33.9098987],
      northEastKenya: [4.62, 41.899578],
      bounds: [
        [-4.8995204, 33.9098987],
        [4.62, 41.899578],
      ],
      zoom: 11,
      WIDTH: 500,
      animaIcon: "",
      polygon: {
        //polygon for Nairobi
        cbd: [
          [-1.293699881869827, 36.82134714926519],
          [-1.2929981839886295, 36.822387400028646],
          [-1.2933271212590824, 36.82311855796124],
          [-1.2934002184251199, 36.82476366330786],
          [-1.2913169483831979, 36.82878503193376],
          [-1.2891971279911303, 36.82783452662187],
          [-1.2871869518507992, 36.83134408469542],
          [-1.2862366862153323, 36.832038684731174],
          [-1.285578809798352, 36.831819337351845],
          [-1.281192962691236, 36.825933515999026],
          [-1.2810467676581396, 36.82242395792548],
          [-1.2791096826833979, 36.82044983150897],
          [-1.2801695972840577, 36.81906063143842],
          [-1.2798406583170987, 36.81840258929961],
          [-1.2816315477397353, 36.8148564733292],
          [-1.2939484470995382, 36.82118098944153],
        ],
        color: "blue",
      },
      parklandsPolygon: {
        latlng: [
          [-1.2673063576687582, 36.81793538217846],
          [-1.2680710512167934, 36.81725548817309],
          [-1.269260574064461, 36.81636312729037],
          [-1.2704925792943982, 36.814918352527116],
          [-1.2721494129873179, 36.814408432022304],
          [-1.2695579546908817, 36.812496230130904],
          [-1.26513972472344, 36.81173134937421],
          [-1.2634828865444945, 36.80901177335039],
          [-1.2633554374102403, 36.80671713108015],
          [-1.262463293293976, 36.80412503518238],
          [-1.261486182719537, 36.80357262130295],
          [-1.2553261293602276, 36.80735453171104],
          [-1.2549012975584617, 36.80803442571752],
          [-1.2551561966475617, 36.81007410773478],
          [-1.2546039152560837, 36.81202880300174],
          [-1.2539241841516429, 36.81343108438935],
          [-1.2535418353286758, 36.81572572665959],
          [-1.2539241841516429, 36.819677610569244],
          [-1.254646398443441, 36.8218022793379],
          [-1.2568130401230917, 36.82477681561352],
          [-1.2575352536167088, 36.82622159037561],
          [-1.2577476693126357, 36.82690148438215],
          [-1.2583424331677975, 36.82694397775782],
          [-1.2615711488716386, 36.82566917649615],
          [-1.2653946228106037, 36.823799467979484],
          [-1.267391323629198, 36.822609653469215],
          [-1.2684533979055885, 36.82095241182972],
          [-1.2673488406487792, 36.81776540867682],
        ],
        color: "Blue",
      },
      karenPolygon: {
        latlng: [
          [-1.3223514861480652, 36.70750932168613],
          [-1.3249105442471745, 36.696494673953396],
          [-1.325954051166022, 36.69497762783743],
          [-1.3256120387706716, 36.69315638675249],
          [-1.326871081856467, 36.6919043286716],
          [-1.3275711335778766, 36.69039579162467],
          [-1.3300320840467776, 36.688021254392936],
          [-1.3297217066138387, 36.68539606980261],
          [-1.327963326459468, 36.684446387735534],
          [-1.3297513992751249, 36.679139730900204],
          [-1.3368477198684445, 36.68291197659374],
          [-1.336935567065666, 36.68494603356956],
          [-1.3405550763122989, 36.687212980198694],
          [-1.3429837483184457, 36.68761589012337],
          [-1.3429837483184457, 36.68761589012337],
          [-1.3601915422501065, 36.70589896711752],
          [-1.367407254929816, 36.71408836447358],
          [-1.3675776739210193, 36.71698187929624],
          [-1.3678128678174488, 36.72097519644774],
          [-1.3791100504067941, 36.73414089001838],
          [-1.3856269224689157, 36.7521214491955],
          [-1.3849302312157477, 36.75989694574636],
          [-1.3737741775413213, 36.758247525217655],
          [-1.3737741775413213, 36.758247525217655],
          [-1.36715196614567, 36.76761890509118],
          [-1.3609734308403887, 36.76276837600781],
          [-1.3541718056317364, 36.76194136210694],
          [-1.3428886199373693, 36.76674688904998],
          [-1.335875904524542, 36.71862969142313],
          [-1.3221923447303396, 36.70733591641863],
        ],
        color: "Blue",
      },
      madarakaPolygon: {
        latlng: [
          [-1.3123158322341624, 36.81576232341601],
          [-1.30938058465415, 36.818147836373385],
          [-1.3069956934645148, 36.81931000935327],
          [-1.305650369229582, 36.82114501932128],
          [-1.3049165557071376, 36.82279652829166],
          [-1.30363238152745, 36.82383636727272],
          [-1.3023482066939494, 36.82395870127033],
          [-1.3005748213225985, 36.823652866276234],
          [-1.2998410063218415, 36.82383636727272],
          [-1.2992906449310055, 36.82090035132478],
          [-1.3008194262761918, 36.82175668930938],
          [-1.3016143922090606, 36.81998284634139],
          [-1.3007582750403373, 36.81973817834614],
          [-1.3028374162310712, 36.8134991444563],
          [-1.3024093578912783, 36.81209230348114],
          [-1.3028374162310712, 36.81080779650364],
          [-1.303143172144729, 36.81001262551786],
          [-1.3060784270192443, 36.80964562352497],
          [-1.3072402977930437, 36.807137776568794],
          [-1.3096863397716163, 36.80542510059959],
          [-1.3155568307691397, 36.802489084651654],
          [-1.3161071885932074, 36.80352892363274],
          [-1.3168409988359997, 36.804385261618506],
          [-1.3181863170522234, 36.80683194157476],
          [-1.321549609414177, 36.808177615551045],
          [-1.3187978250927301, 36.81154180049063],
          [-1.317697110512654, 36.814355482440845],
          [-1.3196539360965858, 36.817291498388784],
          [-1.3173913563753956, 36.81998284634139],
          [-1.3161071885932074, 36.81998284634139],
          [-1.3141503602234934, 36.819799345344904],
          [-1.313416549189597, 36.820105180339],
          [-1.31317194546412, 36.8188206733615],
          [-1.314028058399657, 36.818147836373385],
          [-1.3123158322341624, 36.81570115641719],
        ],
        color: "Blue",
      },
      rongaiPolygon: {
        latlng: [
          [-1.3870892704768636, 36.777433316056374],
          [-1.3859022715786722, 36.780045478422096],
          [-1.3868518707450477, 36.78253890613388],
          [-1.3881575689774195, 36.78265764078668],
          [-1.3889884674768354, 36.781707763563276],
          [-1.390650263599042, 36.780639151687126],
          [-1.391718560489224, 36.78135155960493],
          [-1.3924487328330883, 36.77995718268062],
          [-1.3931789049508012, 36.77995718268062],
          [-1.394373731563391, 36.777035631026564],
          [-1.393776318333508, 36.776305243113114],
          [-1.3926478707055026, 36.77537565849627],
          [-1.394506490038367, 36.77484446728607],
          [-1.3959668327708528, 36.772387707941164],
          [-1.3980909660352125, 36.773516489261254],
          [-1.3998168228969092, 36.77245410684222],
          [-1.3996176856317533, 36.77139172442318],
          [-1.3997504438104187, 36.7707941343119],
          [-1.3996176856317533, 36.76953255518822],
          [-1.4016754365578095, 36.770196544200644],
          [-1.4025383638289242, 36.769333358484886],
          [-1.4065874798427842, 36.76641180683089],
          [-1.4063219642527542, 36.765083828807434],
          [-1.4058573118998652, 36.7638222496837],
          [-1.4051271437285067, 36.76342385627706],
          [-1.4051935226625005, 36.76256067056133],
          [-1.405060764792637, 36.76176388374671],
          [-1.4064547220521746, 36.760568703524115],
          [-1.406189206447067, 36.75904152879605],
          [-1.4083797092786767, 36.7573815562657],
          [-1.4081805727429924, 36.75618637604447],
          [-1.4075167841666598, 36.75565518483424],
          [-1.4079150573343782, 36.754460004611644],
          [-1.4083797092786767, 36.75273363318024],
          [-1.4075167841666598, 36.75127285735323],
          [-1.4074504052987464, 36.74967928372405],
          [-1.405060764792637, 36.7488824969094],
          [-1.40472887008373, 36.748152108995924],
          [-1.4051935226625005, 36.74755451888595],
          [-1.4042642174138393, 36.74649213646558],
          [-1.4024719848182912, 36.74655853536663],
          [-1.4035340487447456, 36.745097759540926],
          [-1.4041314594912109, 36.74436737162742],
          [-1.4042642174138393, 36.74197701118359],
          [-1.4049280069152417, 36.74091462876325],
          [-1.4047952490290498, 36.74018424084977],
          [-1.403467669763586, 36.73998504414641],
          [-1.402936637845599, 36.73958665073974],
          [-1.4032021538189952, 36.73898906062851],
          [-1.4023392267939272, 36.73885626282632],
          [-1.4016754365578095, 36.73805947601167],
          [-1.4008125089699064, 36.7375282848015],
          [-1.4016754365578095, 36.7369970935913],
          [-1.4021400897432414, 36.73666509908574],
          [-1.4010116461347621, 36.7357355144689],
          [-1.4010116461347621, 36.73507152545653],
          [-1.4003478555224547, 36.73414194083969],
          [-1.4008788880263126, 36.73314595732174],
          [-1.4015426784882266, 36.73274756391379],
          [-1.4008788880263126, 36.73115399028458],
          [-1.4003478555224547, 36.72989241116085],
          [-1.3996176856317533, 36.72936121995204],
          [-1.3996176856317533, 36.727302854013715],
          [-1.3980909660352125, 36.726107673792484],
          [-1.3960995911559024, 36.72464689796544],
          [-1.396165970346857, 36.725576482582284],
          [-1.3955021783641826, 36.7255100836812],
          [-1.3951039030841486, 36.724713296866554],
          [-1.394373731563391, 36.72464689796544],
          [-1.393776318333508, 36.72531088697784],
          [-1.3931789049508012, 36.7255100836812],
          [-1.3929797671233217, 36.724447701262136],
          [-1.3914530432177514, 36.72391651005199],
          [-1.3908556292462606, 36.72404930785419],
          [-1.3902582151235379, 36.723451717742904],
          [-1.3907228705656536, 36.72278772873048],
          [-1.3907892499069021, 36.72205734081831],
          [-1.390457353180821, 36.720862160595715],
          [-1.3893289039661596, 36.71993257597887],
          [-1.3888642482497175, 36.718604597954084],
          [-1.3873375216828663, 36.718870193559866],
          [-1.3869392450258147, 36.71979977817668],
          [-1.3858771736112345, 36.72126055400366],
          [-1.3848151017191128, 36.720397368286655],
          [-1.3846159631868176, 36.72099495839794],
          [-1.3830892338811083, 36.72013177268221],
          [-1.380566809398843, 36.72019817158335],
          [-1.380035772324149, 36.71993257597887],
          [-1.3798366333909797, 36.71920218806537],
          [-1.3773805851751746, 36.71807340674522],
          [-1.376119370241966, 36.71880379465742],
          [-1.3747253950663918, 36.7194013847687],
          [-1.373464178731112, 36.71833900234964],
          [-1.373464178728696, 36.71647381760761],
          [-1.3724108901157592, 36.71401543842228],
          [-1.3681977310288431, 36.71348864288166],
          [-1.3666778885977209, 36.70933364623633],
          [-1.3654016727119256, 36.70638769540099],
          [-1.3661870364139332, 36.704914719983805],
          [-1.365303502230276, 36.70422733145571],
          [-1.3665797181692056, 36.70353994292668],
          [-1.3663833772991296, 36.702066967509495],
          [-1.365598013661284, 36.70353994292668],
          [-1.3643217972021233, 36.703147149482646],
          [-1.364714479261096, 36.701968769148436],
          [-1.3633400917723293, 36.701575975703406],
          [-1.3635364328899584, 36.70029939700828],
          [-1.3621620447286062, 36.69921921503513],
          [-1.3609839971089315, 36.69921921503513],
          [-1.3594132660539913, 36.697746239616976],
          [-1.3587260708963527, 36.69656785928282],
          [-1.3576461923961318, 36.69745164453394],
          [-1.356509582166325, 36.69534017461302],
          [-1.355266175685614, 36.6935781887492],
          [-1.3538155339848856, 36.69326725006789],
          [-1.3529865954795497, 36.69046880193102],
          [-1.3511214828087361, 36.68995057079442],
          [-1.349774456100377, 36.69005421702255],
          [-1.353504682078352, 36.69420006611287],
          [-1.3528829781467522, 36.696272990659025],
          [-1.3526757434678132, 36.70321728788625],
          [-1.354126385850563, 36.70529021243141],
          [-1.3584783077870384, 36.70881418415905],
          [-1.3586855419702886, 36.71088710870421],
          [-1.3597217126158796, 36.711508986067855],
          [-1.360136180750203, 36.71275274079511],
          [-1.3651097927992737, 36.718142344613796],
          [-1.3663531942054732, 36.71824599084087],
          [-1.367285744837261, 36.71876422197741],
          [-1.3677002116689891, 36.7209407927497],
          [-1.368529145116696, 36.720318915386],
          [-1.3698761613595423, 36.72145902388618],
          [-1.3710159437411988, 36.72446476447732],
          [-1.3728810410145513, 36.72581216543173],
          [-1.3753678351152843, 36.7291288447052],
          [-1.3793052538071748, 36.73679866552317],
          [-1.3812739607105868, 36.74353567029618],
          [-1.3855222174158683, 36.749961736386865],
          [-1.3847969058343637, 36.760533651568835],
          [-1.3859366810774816, 36.765923255387435],
          [-1.388630693106407, 36.76747794879708],
          [-1.3887343088922677, 36.76975816579642],
          [-1.3889415404502472, 36.77421495357004],
          [-1.3870764557710942, 36.77742798661541],
        ],
        color: "Blue",
      },
      dandoraPolygon: {
        latlng: [
          [-1.2619310341703596, 36.8825387659015],
          [-1.2617084279683013, 36.88513646817421],
          [-1.2604098914173534, 36.88981233226599],
          [-1.2596678702396815, 36.89144517369334],
          [-1.2582951305052745, 36.8931522351869],
          [-1.2582580294214267, 36.89348622547996],
          [-1.2549560308376329, 36.89281824489524],
          [-1.2545108172255937, 36.89367177564199],
          [-1.2545108172255937, 36.894191316095686],
          [-1.2533606817128344, 36.8941170960309],
          [-1.253397782866216, 36.89318934521927],
          [-1.2495021588851785, 36.89122251349889],
          [-1.2511346115438755, 36.88810527077243],
          [-1.251542724549168, 36.88710329989462],
          [-1.2527299620229968, 36.886286879181654],
          [-1.2527670631853738, 36.88517357820663],
          [-1.2563287723278478, 36.882316105707076],
          [-1.2565884800973635, 36.88072037431073],
          [-1.2586290402365705, 36.880312163954244],
          [-1.2618939331382535, 36.8805348241487],
          [-1.262116539323003, 36.882390325771865],
          [-1.2618939331382535, 36.88272431606495],
        ],
        color: "Blue",
      },
    };
  },
  mounted() {
    // console.log("===> ",this.madarakaPolygon.latlng);
    //     let arr =[[
    //             36.76975816579642,
    //             -1.3887343088922677
    //           ],
    //           [
    //             36.77421495357004,
    //             -1.3889415404502472
    //           ],
    //           [
    //             36.77742798661541,
    //             -1.3870764557710942
    //           ]]
    // let rev= []
    // for (let i =0 ; i<arr.length ; i++){
    //   rev.push(arr[i].reverse())
    // }
    // //const reversed = array1.reverse();
    // console.log(rev);
  },
  async onLeafletReady() {
    await this.$nextTick();
    this.leafletObject = this.$refs.map.leafletObject;
    this.leafletReady = true;

    new L.Toolbar2.DrawToolbar({
      position: "topleft",
    }).addTo(this.leafletObject);
  },
};
</script>

<style></style>
